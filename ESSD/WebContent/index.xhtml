<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	>

<h:head>
	<!-- <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
 	<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
  	<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script> -->
  	
  	<script src="./javascript/script.js" type="text/javascript" language="JavaScript"></script> 	
  	
  	<link rel="shortcut icon" href="./images/favicon.ico" />
	<link href="./css/styles.css" rel="stylesheet" type="text/css" />
	<title>ESSD</title>	
	
	
</h:head>

<h:body>
	<h:form id="form">
	<!-- Topmost part of the Web Application -->		
		<div id="header">
			<div id="banner"><p:graphicImage value="/images/header.png"  style="width: 100%;" />	</div>
			<div id="bannerTitle"><p:graphicImage value="/images/title.png" style="height: 20%; Width: 20%;" /> </div>
			
			<div id="spinner" class="spinner" style="display:none;">
				<p:graphicImage value="/images/ajax-loader.gif" alt="Loading" />
			</div>
			
			<div id="logout">
				<p:commandButton id="adminToolButton" icon="ui-icon-gear" styleClass="adminToolButton" value="Admin Tools" type="button" rendered="#{accountMgtBean.admin and accountMgtBean.loggedIn}" />
				<p:tieredMenu overlay="true" trigger="adminToolButton" my="left top" at="left bottom">
					<p:menuitem value="Add User" styleClass="adminMenu" icon="ui-icon-plus" oncomplete="addUserDialog.show()"/>
					<p:menuitem value="Edit Users" styleClass="adminMenu" icon="ui-icon-pencil" oncomplete="editUserDialog.show()" actionListener="#{adminBean.populateUsers}" update=":form:editUserDialog"/>
				</p:tieredMenu>
				<!--   <h:outputText value="Welcome #{accountMgtBean.username} !, " rendered="#{accountMgtBean.loggedIn}" styleClass="text" /> -->
				<p:commandButton value="Log Out" icon="ui-icon-power" ajax="true" update="@all" actionListener="#{accountMgtBean.logOut}" rendered="#{accountMgtBean.loggedIn}" style="font-size: 13px;"/>
				
					
									
			</div>
			<p:growl id="growl" showDetail="true" life="5000" />
		</div>
	
	<!-- Web Application Content -->
	<div id="content">
	
    
		<!-- Log In box for the user to enter his/her credentials (AccountMgtBean) -->
		
			<p:panel styleClass="home" rendered="#{!accountMgtBean.loggedIn}">
				<div id="homePanel">
					<div id="description">
						<br/><br/>
					</div>
					<div id="login">
						<h:outputText value="TO BEGIN, PLEASE LOGIN" style="font-family: 'adobeheiti'; font-size: 12px;" /><br/>
						<p:inputText id="username" size="32" maxlength="32" value="#{accountMgtBean.username}" required="true" />
						<p:watermark for="username" value="Username" />  
						<br /><br />
						<p:password id="password" size="32" maxlength="32" value="#{accountMgtBean.password}" required="true"/>
						<p:watermark for="password" value="Password" />  
						<br /><br />
						<p:commandButton id="logIn" value="Log In" onclick="loading.show()" icon="ui-icon-unlocked" style="margin-left: 185px; font-size:18px;" update="@all @form growl" actionListener="#{accountMgtBean.logIn}" />
						
					</div>
				</div>
			</p:panel>	
			
			
			
			<p:dialog id="loading" widgetVar="loading" closable="false" closeOnEscape="false" resizable="false" modal="true" style="opacity: 1.0 !important;">
				<p:graphicImage value="/images/ajax-loader.gif" /> 
			</p:dialog>
		
		<center>
			<!-- BRUTE FORCE FOR NOW --><br/><br/><br/>
			
		</center>
		
		<!--  Risk Factor Information Dialog Box (SPTBean) -->
			<p:hotkey bind="esc" handler="infoDialog.hide()"></p:hotkey>
			<p:dialog header="Risk Factor Information" widgetVar="infoDialog" resizable="false" id="infoDialog"  
                showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center" style="width: 50% !important;">    
			
				<h:panelGrid id="displayInfo" columns="2" style="margin:0 auto; " rowClasses="even-row, odd-row">             
					
					<h:outputText value="Name: " style="font-weight:bold; font-size:12px; "/>  
					<h:outputText value="#{sPTBean.selectedRf.name}" style="font-size:14px;"/>
		  			
					<h:outputText value="Description: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.description}" style="font-size:14px;"/> 

					<h:outputText value="History: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.history}" style="font-size:14px;"/> 

					<h:outputText value="Signs and Symptoms: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.signs_symptoms}" style="font-size:14px;"/> 
					
					<h:outputText value="Physical Examinations: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.physical_exams}" style="font-size:14px;"/> 
					
					<h:outputText value="Laboratory Examinations: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.laboratory_exams}" style="font-size:14px;"/> 
					
					<h:outputText value="General Measures: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.general_measures}" style="font-size:14px;"/> 
					
					<h:outputText value="Specific Measures: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.specific_measures}" style="font-size:14px;"/>  
				</h:panelGrid>  
			</p:dialog>  
    
			
			<!-- Editing Risk Factor Information Dialog Box (SKDBean) -->
			<p:hotkey bind="esc" handler="editDialog.hide()"></p:hotkey>
			<p:dialog header="Edit Risk Factor Information" widgetVar="editDialog" resizable="false" id="editDialog"  
                showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center">    
				<p:tabView id="displayEdit" style="font-size: 15px;">
					<p:tab id="basicEdit" title="Basic">
						<h:panelGrid columns="2" cellpadding="2">
							<h:column>
								<h:outputText value="Name: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>	
								<p:inputText value="#{sKDBean.selectedRf.name}" style="font-size:12px;" size="32" maxlength="32" />
							</h:column>
							<h:column>
								<h:outputText value="Description: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.description}" style="font-size:12px;" rows="4" cols="130" counter="descripCountEdit" size="420" maxlength="420"       
   																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="descripCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
							<h:column>
								<h:outputText value="History: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.history}" style="font-size:12px;" rows="4" cols="130" counter="histCountEdit" size="420" maxlength="420"       
   																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="histCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
							<h:column>
								<h:outputText value="Signs and Symptoms: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.signs_symptoms}" style="font-size:12px;" rows="4" cols="130" counter="ssCountEdit" size="420" maxlength="420"       
   																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="ssCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
						</h:panelGrid>
					</p:tab>
					
					<p:tab id="additionalEdit" title="Additional">
						<h:panelGrid columns="2" cellpadding="2">
							<h:column>
								<h:outputText value="Physical Examinations: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.physical_exams}" style="font-size:12px;" rows="3" cols="130" counter="peCountEdit" size="420" maxlength="420"       
   																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="peCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
   						
							<h:column>
								<h:outputText value="Laboratory Examinations: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.laboratory_exams}" style="font-size:12px;" rows="3" cols="130" counter="leCountEdit" size="420" maxlength="420"       
   																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="leCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
							<h:column>
								<h:outputText value="General Measures: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.general_measures}" style="font-size:12px;" rows="3" cols="130" counter="gmCountEdit" size="420" maxlength="420"       
   																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="gmCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
							<h:column>
								<h:outputText value="Specific Measures: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.selectedRf.specific_measures}" style="font-size:12px;" rows="3" cols="130" counter="smCountEdit" size="420" maxlength="420"       
																			counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="smCountEdit" style="font-size:11px; float:right;"/> 
							</h:column>
						</h:panelGrid>
					</p:tab>
					
					<p:tab id="statesForEdit" title="States">
						<p:panel style="border:0px !important; padding:0px !important;">
							<p:panel id="connPanel" rendered="#{sKDBean.editStates}">
								<p:dataTable id="modStates" var="modStates" rows="4"
									style="width: 850px;" value="#{sKDBean.statesForEdit}" paginator="true"
									editable="true" >
									<p:ajax event="rowEdit" execute="@this" listener="#{sKDBean.rowEdit}" update="modStates :form:growl :form:displayEdit:connEditPanel :form:displayEdit:probTable :form:displayEdit:saveStatesEdit :form:cancelEdit :form:saveEdit"/>
									<p:column>
										<p:cellEditor>  
											<f:facet name="output">  
												<h:outputText value="#{modStates.stateName}" />  
											</f:facet>  
											<f:facet name="input">  
											<p:inputText value="#{modStates.stateName}" style="width:100%"/>  
											</f:facet>  
										</p:cellEditor>
									</p:column>
									<p:column headerText="Edit" style="width:7%">  
										<center><p:rowEditor /></center>  
									</p:column> 
									<p:column headerText="Remove" style="width:7%">
										<center>
											<p:commandButton id="delThisStateEdit" icon="ui-icon-minusthick" 
																						update="modStates :form:growl :form:displayEdit:connEditPanel :form:displayEdit:probTable :form:displayEdit:saveStatesEdit :form:cancelEdit :form:saveEdit" style="font-size:9px"
																						process="@this"
																			  action="#{sKDBean.delStateEdit}">
														<f:setPropertyActionListener value="#{modStates}" target="#{sKDBean.stateToEdit}" />
											</p:commandButton>
										</center>
									</p:column>
								</p:dataTable>
								<br/>
								<center>
									<p:panel id="addStateEdit">
										<h:inputText id="newStateNameEdit" value="#{sKDBean.dummy2}" size="32" maxlength="32" />
										<p:watermark for="newStateNameEdit" value="New State Name" />  
										<p:commandButton id="addThisStateEdit" value="Add" icon="ui-icon-triangle-1-n" 
																						update="addStateEdit modStates :form:growl :form:displayEdit:connEditPanel :form:displayEdit:probTable :form:displayEdit:saveStatesEdit :form:cancelEdit :form:saveEdit" style="font-size:12px"
																			  actionListener="#{sKDBean.addStateEdit}" />
									</p:panel>
								</center>
								<center>
									<p:commandButton id="saveStatesEdit" value="Save Changes" icon="ui-icon-arrowthick-1-nw" 
												disabled="#{sKDBean.editStatesRow}"
												style="font-size: 10px"
												immediate="true"
												actionListener="#{sKDBean.saveChangesStates}"
												update=":form:displayEdit :form:saveEdit :form:cancelEdit :form:growl" />
								</center>
							</p:panel>	
						</p:panel>          
					</p:tab>
					
					<p:tab id="connEdit" title="Connections">
						<p:panel id="connEditPanel" style="border:0px !important; padding:0px !important;">
							<h:panelGrid columns="2" cellpadding="2" rendered="#{sKDBean.editConn}">
								<h:column>
									<h:outputText value="Node's Parents: " style="font-weight:bold; font-size:14px;"/>  
									<p:pickList id="parentsEdit" value="#{sKDBean.parents}" var="parentsEdit"   
											itemLabel="#{parentsEdit}" itemValue="#{parentsEdit}" styleClass="plsearch"
											showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
										<f:facet name="sourceCaption">Available</f:facet>  
										<f:facet name="targetCaption">Parent/s</f:facet> 
										<p:ajax event="transfer" execute="@this" listener="#{sKDBean.onEditParentTransfer}" update="parentsEdit childrenEdit :form:displayEdit:probTable :form:displayEdit:prob :form:displayEdit:saveConnEdit :form:displayEdit:statesForEdit :form:growl :form:cancelEdit :form:saveEdit" />  
									</p:pickList>  
								</h:column>
								<h:column>
									<h:outputText value="Node's Children: " style="font-weight:bold; font-size:14px;"/>  
									<p:pickList id="childrenEdit" value="#{sKDBean.children}" var="childrenEdit"   
															itemLabel="#{childrenEdit}" itemValue="#{childrenEdit}"
															showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
										<f:facet name="sourceCaption">Available</f:facet>  
										<f:facet name="targetCaption">Children</f:facet>
										<p:ajax event="transfer" execute="@this" listener="#{sKDBean.onEditChildrenTransfer}" update="parentsEdit childrenEdit :form:displayEdit:probTable :form:displayEdit:prob :form:displayEdit:statesForEdit :form:displayEdit:saveConnEdit :form:growl :form:cancelEdit :form:saveEdit" />  
									</p:pickList>
								</h:column>
								<center>
								<p:commandButton id="saveConnEdit" value="Save Changes" icon="ui-icon-arrowthick-1-nw" 
												disabled="#{sKDBean.editPick}"
												style="font-size: 10px"
												immediate="true"
												actionListener="#{sKDBean.saveChangesConn}"
												update=":form:displayEdit :form:saveEdit :form:cancelEdit :form:growl" />
								</center>
							</h:panelGrid>
						</p:panel>
					</p:tab>
					
					<p:tab id="probTable" title="Probability Table">
						<p:scrollPanel id="probEdit" rendered="#{sKDBean.editProb}" style="width:870px; height:300px; padding:15px" mode="native">  
							<pe:dynaForm id="prob" value="#{sKDBean.rfModel}" var="prob">  
								<pe:dynaFormControl type="output">  
					        		<center>
										<h:outputText value="#{prob.label}" style="font-size:13px; font-weight:bold;"/>  
									</center>
								</pe:dynaFormControl> 
								<pe:dynaFormControl type="input">  
									<p:inputText value="#{prob.value}" style="max-width:30px; font-size:14px;"/>  
								</pe:dynaFormControl> 
					        
								<f:facet name="buttonBar">
									<center>
										<p:commandButton id="resetProbEdit" value="Reset" 
												style="font-size: 10px"
												type="reset" /> 
									</center>
								</f:facet>
									
							</pe:dynaForm>  
						</p:scrollPanel>  
					</p:tab>
				</p:tabView>
			
				<p:commandButton id="saveEdit" value="Save" icon="ui-icon-disk" disabled="#{sKDBean.editSave}"
								style="font-size: 12px" actionListener="#{sKDBean.saveEdit}"
								execute="@this" update=":form:acc:listRisk :form:acc:riskFactors :form:acc:output :form:displayEdit:connEdit" />
												          
				<p:commandButton id="cancelEdit" value="Cancel" disabled="#{sKDBean.editCancel}" style="font-size:12px" 
								icon="ui-icon-closethick" onclick="editDialog.hide()" type="button" />
			</p:dialog>  
   	
			<!-- Delete Risk Factor Dialog Box (SKDBean) -->
			<p:hotkey bind="esc" handler="deleteDialog.hide()"></p:hotkey>
			<p:confirmDialog header="Confirm Delete" widgetVar="deleteDialog" resizable="false" id="deleteDialog"  
						showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center"
						message="Are you sure you want to delete #{sKDBean.selectedRf.name} ?">    
				<center>
					<p:commandButton id="deleteNode" value="Yes"
									update=":form:growl :form:acc:listRisk :form:acc:riskFactors :form:acc:output :form:displayAdd:conn" style="font-size:12px"
									actionListener="#{sKDBean.deleteNode}"/> 
					<p:commandButton id="dontDeleteNode" value="No" style="font-size:12px" onclick="deleteDialog.hide()" type="button" />	
				</center>			
			</p:confirmDialog>
   	
			<!-- Edit Stroke Dialog Box (SKDBean)-->
			<p:hotkey bind="esc" handler="editStrokeInfoDialog.hide()"></p:hotkey>
			<p:dialog header="Edit Stroke Information" widgetVar="editStrokeInfoDialog" resizable="false" id="editStrokeInfoDialog"  
					showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center">    
				<p:tabView id="editStrokeInfo" style="font-size: 15px;">
					<p:tab id="strokeTypeEdit" title="States">
						<p:panel style="border:0px !important; padding:0px !important;">
							<p:panel id="strokeTypePanel" rendered="#{sKDBean.editStates}">
								<p:dataTable id="strokeStates" var="strokeStates" rows="3" 
										style="width: 850px;" value="#{sKDBean.strokeTypes}" paginator="true"
										editable="true">
									<p:ajax event="rowEdit" execute="@this" listener="#{sKDBean.rowEdit}" update="strokeStates :form:growl :form:editStrokeInfo:strokeConnEdit :form:editStrokeInfo:probEditStroke :form:editStrokeInfo:saveTypesEdit :form:cancelEditStroke :form:saveEditStroke"/>
									<p:column>
										<p:cellEditor>  
											<f:facet name="output">  
												<h:outputText value="#{strokeStates.name}" />  
											</f:facet>  
											<f:facet name="input">  
												<p:inputText value="#{strokeStates.name}" style="width:100%"/>  
											</f:facet>  
										</p:cellEditor>
									</p:column>
									<p:column>
										<p:cellEditor>  
											<f:facet name="output">  
												<h:outputText value="#{strokeStates.description}" />  
											</f:facet>  
											<f:facet name="input">  
												<p:inputText value="#{strokeStates.description}" style="width:100%"/>  
											</f:facet>  
										</p:cellEditor>
									</p:column>
									<p:column headerText="Edit" style="width:7%">  
										<center><p:rowEditor /></center>  
									</p:column> 
									<p:column headerText="Remove" style="width:7%">
										<center>
											<p:commandButton id="delThisType" icon="ui-icon-minusthick" 
																						update="@this strokeStates :form:growl :form:editStrokeInfo:probEditStroke :form:editStrokeInfo:strokeConnEdit :form:editStrokeInfo:saveTypesEdit :form:cancelEditStroke :form:saveEditStroke" style="font-size:9px"
																						process="@this"
																			  action="#{sKDBean.delType}">
												<f:setPropertyActionListener value="#{strokeStates}" target="#{sKDBean.selectedType}" />
											</p:commandButton>
										</center>
									</p:column>
								</p:dataTable>
								<br/>
								<center>
									<p:panel id="addStrokeType">
										<h:inputText id="newTypeName" value="#{sKDBean.newTypeName}" size="32" maxlength="32" />
										<p:watermark for="newTypeName" value="New Type Name" />
										<h:inputText id="newTypeDescrip" value="#{sKDBean.newTypeDescrip}" size="32"/>
										<p:watermark for="newTypeDescrip" value="New Type Description" />
										<p:commandButton id="addThisType" value="Add" icon="ui-icon-triangle-1-n" 
																					update="addStrokeType strokeStates :form:editStrokeInfo:probEditStroke :form:growl :form:editStrokeInfo:strokeConnEdit :form:editStrokeInfo:saveTypesEdit :form:cancelEditStroke :form:saveEditStroke" style="font-size:12px"
																		  actionListener="#{sKDBean.addType}" />
									</p:panel>
								</center>
								<center>
									<p:commandButton id="saveTypesEdit" value="Save Changes" icon="ui-icon-arrowthick-1-nw" 
										disabled="#{sKDBean.editStatesRow}"
										style="font-size: 10px"
										immediate="true"
										actionListener="#{sKDBean.saveChangesType}"
										update=":form:editStrokeInfo :form:saveEditStroke :form:cancelEditStroke :form:growl" />
								</center>
							</p:panel>
						</p:panel>
					</p:tab>
					
					<p:tab id="strokeConnEdit" title="Connections">
						<p:panel id="connEditTypePanel" style="border:0px !important; padding:0px !important;">
							<h:panelGrid columns="2" cellpadding="2" rendered="#{sKDBean.editConn}">
								<h:column>
									<h:outputText value="Stroke's Parents: " style="font-weight:bold; font-size:14px;"/>  
									<p:pickList id="parentsEditStroke" value="#{sKDBean.parents}" var="parentsEditStroke"   
											itemLabel="#{parentsEditStroke}" itemValue="#{parentsEditStroke}" styleClass="plsearch"
											showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
										<f:facet name="sourceCaption">Available</f:facet>  
										<f:facet name="targetCaption">Parent/s</f:facet> 
										<p:ajax event="transfer" execute="@this" listener="#{sKDBean.onEditParentTransfer}" update="parentsEditStroke childrenEditStroke :form:editStrokeInfo:probEditStroke :form:editStrokeInfo:strokeTypeEdit :form:editStrokeInfo:saveConnTypeEdit :form:growl :form:cancelEditStroke :form:saveEditStroke" />  
									</p:pickList>  
								</h:column>
								<h:column>
									<h:outputText value="Stroke's Children: " style="font-weight:bold; font-size:14px;"/>  
									<p:pickList id="childrenEditStroke" value="#{sKDBean.children}" var="childrenEditStroke"   
												itemLabel="#{childrenEditStroke}" itemValue="#{childrenEditStroke}"
												showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
										<f:facet name="sourceCaption">Available</f:facet>  
										<f:facet name="targetCaption">Children</f:facet>
										<p:ajax event="transfer" execute="@this" listener="#{sKDBean.onEditChildrenTransfer}" update="parentsEditStroke childrenEditStroke :form:editStrokeInfo:probEditStroke :form:editStrokeInfo:strokeTypeEdit :form:editStrokeInfo:saveConnTypeEdit :form:growl :form:cancelEditStroke :form:saveEditStroke" />  
									</p:pickList>
								</h:column>
									
								<center>
									<p:commandButton id="saveConnTypeEdit" value="Save Changes" icon="ui-icon-arrowthick-1-nw" 
													disabled="#{sKDBean.editPick}"
													style="font-size: 10px"
													immediate="true"
													actionListener="#{sKDBean.saveChangesConnStroke}"
													update=":form:editStrokeInfo :form:saveEditStroke :form:cancelEditStroke :form:growl" />
								</center>
							</h:panelGrid>
						</p:panel>
					</p:tab>
					
					<p:tab id="probEditStroke" title="Probabilities">
						<p:scrollPanel id="strokeProbEdit" rendered="#{sKDBean.editProb}" style="width:870px; height:300px; padding:15px" mode="native">  
							<pe:dynaForm id="probStroke" value="#{sKDBean.strokeModel}" var="probStroke">  
								<pe:dynaFormControl type="output">  
									<center>
										<h:outputText value="#{probStroke.label}" style="font-size:13px; font-weight:bold;"/>  
									</center>
								</pe:dynaFormControl> 
								<pe:dynaFormControl type="input">  
									<p:inputText value="#{probStroke.value}" style="max-width:30px; font-size:14px;"/>  
								</pe:dynaFormControl> 
								
								<f:facet name="buttonBar">
									<center>
										<p:commandButton id="resetProbEditStroke" value="Reset" 
													style="font-size: 10px"
													type="reset" /> 
									</center>
								</f:facet>
							</pe:dynaForm>  
						</p:scrollPanel>  
					</p:tab>
				</p:tabView>
        
				<p:commandButton id="saveEditStroke" value="Save" icon="ui-icon-disk" 
								disabled="#{sKDBean.editSave}"
								style="font-size: 12px"
								execute="@this"
								actionListener="#{sKDBean.saveStrokeEdit}"
								update=":form:acc:listRisk :form:acc:riskFactors :form:acc:output :form:displayEdit:connEdit" />
												          
				<p:commandButton id="cancelEditStroke" value="Cancel" 
								disabled="#{sKDBean.editCancel}"
								style="font-size:12px" icon="ui-icon-closethick"
								onclick="editStrokeInfoDialog.hide()" type="button" />
			</p:dialog>
   	
			<!-- Add Risk Factor Dialog Box (SKDBean) -->
			<p:hotkey bind="esc" handler="addDialog.hide()"></p:hotkey>
			<p:dialog header="Add a Risk Factor" widgetVar="addDialog" resizable="false" id="addDialog"  
						showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center">    
				<p:tabView id="displayAdd" style="font-size: 15px;">
					<p:tab id="basic" title="Basic">
						<h:panelGrid columns="2" cellpadding="2">
							<h:column>
								<h:outputText value="Name: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>	
								<h:inputText value="#{sKDBean.newNodeName}" style="font-size:12px;" size="32" maxlength="32" />
							</h:column>
								
							<h:column>
								<h:outputText value="Description: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodeDescrip}" style="font-size:12px;" rows="4" cols="130" counter="descripCount" size="420" maxlength="420"       
																		counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="descripCount" style="font-size:11px; float:right;"/> 
							</h:column>
								
							<h:column>
								<h:outputText value="History: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodeHist}" style="font-size:12px;" rows="4" cols="130" counter="histCount" size="420" maxlength="420"       
																		counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="histCount" style="font-size:11px; float:right;"/> 
							</h:column>
								
							<h:column>
								<h:outputText value="Signs and Symptoms: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodeSS}" style="font-size:12px;" rows="4" cols="130" counter="ssCount" size="420" maxlength="420"       
												counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="ssCount" style="font-size:11px; float:right;"/> 
							</h:column>
						</h:panelGrid>
					</p:tab>
							
					<p:tab id="additional" title="Additional">
						<h:panelGrid columns="2" cellpadding="2">
							<h:column>
								<h:outputText value="Physical Examinations: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodePE}" style="font-size:12px;" rows="3" cols="130" counter="peCount" size="420" maxlength="420"       
												counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="peCount" style="font-size:11px; float:right;"/> 
							</h:column>
						
							<h:column>
								<h:outputText value="Laboratory Examinations: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodeLE}" style="font-size:12px;" rows="3" cols="130" counter="leCount" size="420" maxlength="420"       
																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="leCount" style="font-size:11px; float:right;"/> 
							</h:column>
						
							<h:column>
								<h:outputText value="General Measures: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodeGM}" style="font-size:12px;" rows="3" cols="130" counter="gmCount" size="420" maxlength="420"       
																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="gmCount" style="font-size:11px; float:right;"/> 
							</h:column>
				
							<h:column>
								<h:outputText value="Specific Measures: " style="font-weight:bold; font-size:14px;"/>  
							</h:column>
							<h:column>
								<p:inputTextarea value="#{sKDBean.newNodeSM}" style="font-size:12px;" rows="3" cols="130" counter="smCount" size="420" maxlength="420"       
																counterTemplate="{0} characters remaining." />
								<br/>
								<h:outputText id="smCount" style="font-size:11px; float:right;"/> 
							</h:column>
						</h:panelGrid>
					</p:tab>
					
					<p:tab id="states" title="States">
						<p:dataTable id="newStates" var="newStates" rows="4" style="width: 850px;" value="#{sKDBean.states}" paginator="true"
								editable="true">
							<p:column>
								<p:cellEditor>  
									<f:facet name="output">  
										<h:outputText value="#{newStates.stateName}" />  
									</f:facet>  
									<f:facet name="input">  
										<p:inputText value="#{newStates.stateName}" style="width:100%"/>  
									</f:facet>  
								</p:cellEditor>
							</p:column>
							<p:column>
								<p:cellEditor>  
									<f:facet name="output">  
										<h:outputText value="#{newStates.stateProb}" />  
									</f:facet>  
									<f:facet name="input">  
										<p:inputText value="#{newStates.stateProb}" style="width:100%"/>  
									</f:facet>  
								</p:cellEditor>
							</p:column>
							<p:column headerText="Edit" style="width:7%">  
								<center><p:rowEditor /></center>  
							</p:column> 
							<p:column headerText="Remove" style="width:7%">
								<center>
									<p:commandButton id="delThisState" icon="ui-icon-minusthick" 
													update="@this newStates" style="font-size:9px"
													process="@this"	action="#{sKDBean.delState}">
										<f:setPropertyActionListener value="#{newStates}" target="#{sKDBean.selectedState}" />
									</p:commandButton>
								</center>
							</p:column>
						</p:dataTable>
					  
						<br/>
						<center>
							<p:panel id="addState">
								<h:inputText id="newStateName" value="#{sKDBean.newStateName}" size="32" maxlength="32" />
								<p:watermark for="newStateName" value="New State Name" />
								<h:inputText id="newStateProb" value="#{sKDBean.newStateProb}" size="32" maxlength="32" />
							  
								<p:commandButton id="addThisState" value="Add" icon="ui-icon-triangle-1-n" 
												update="addState newStates :form:growl" style="font-size:12px"
												actionListener="#{sKDBean.addState}" />
							</p:panel>
						</center>	          
					</p:tab>
							
					<p:tab id="conn" title="Connections">
						<h:panelGrid columns="2" cellpadding="2">
							<h:column>
								<h:outputText value="New Node's Parents: " style="font-weight:bold; font-size:14px;"/>  
									<p:pickList id="parents" value="#{sKDBean.parents}" var="parents"   
												itemLabel="#{parents}" itemValue="#{parents}" styleClass="plsearch"
												showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
										<f:facet name="sourceCaption">Available</f:facet>  
										<f:facet name="targetCaption">Parent/s</f:facet> 
										<p:ajax event="transfer" listener="#{sKDBean.onParentTransfer}" update="parents children" />  
									</p:pickList>  
							</h:column>
							<h:column>
								<h:outputText value="New Node's Children: " style="font-weight:bold; font-size:14px;"/>  
								<p:pickList id="children" value="#{sKDBean.children}" var="children"   
														itemLabel="#{children}" itemValue="#{children}"
														showSourceFilter="true" showTargetFilter="true" filterMatchMode="contains">
									<f:facet name="sourceCaption">Available</f:facet>  
									<f:facet name="targetCaption">Children</f:facet>
									<p:ajax event="transfer" listener="#{sKDBean.onChildrenTransfer}" update="parents children" />  
								</p:pickList>
							</h:column>
						</h:panelGrid>
					</p:tab>
				</p:tabView>
					
				<p:commandButton id="submit" value="Submit" icon="ui-icon-check" 
								style="font-size: 12px"
								actionListener="#{sKDBean.saveNewNode}"
								update=":form:growl :form:acc:listRisk :form:acc:riskFactors :form:acc:output :form:displayAdd:conn" />

				<p:commandButton id="cancelAdd" value="Cancel" style="font-size:12px" icon="ui-icon-closethick"
								onclick="addDialog.hide()" type="button" />
												  
			</p:dialog>  
			
			<!-- Dialog for Process Patient Info (SavePrintBean) -->
			<p:hotkey bind="esc" handler="ppiDialog.hide()"></p:hotkey>
			<p:dialog header="Process Patient Information" widgetVar="ppiDialog" closable="false" closeOnEscape="false" resizable="false" id="ppiDialog"  
						showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center">    
				<p:wizard id="displayPpi" widgetVar="displayPpi" flowListener="#{patientInfoBean.onFlowProcess}" style="width:600px; height:250px; font-size:13px"> 
					<p:tab id="pi" title="Patient Information">
						<h:panelGrid columns="2">  
							<h:outputText value="Case Number: " />  
							<h:outputText label="caseNum" style="font-size:20px; margin-top:2em;margin-bottom:2em;" value="  #{patientInfoBean.patient.caseNumStr}" /> 
							<h:outputText value="Complaint: " />  
							<p:inputTextarea value="#{patientInfoBean.patient.complaint}" style="font-size:15px;" rows="3" cols="70" counter="cCount" size="420" maxlength="420"       
											counterTemplate="{0} characters remaining." />
							<br/>
							<h:outputText id="cCount" style="font-size:11px; float:right;"/> 
						</h:panelGrid>    		
					</p:tab>
					<p:tab id="di" title="Doctor's Information">
						<h:panelGrid columns="2">  
							<h:outputText value="Name: " />  
							
					  		<h:selectOneMenu value="#{patientInfoBean.docName}" >
							    <f:selectItems value="#{patientInfoBean.docNameList}" />
							    <p:ajax event="change" listener="#{patientInfoBean.stateChangeListenerDoc}" update="license" ajaxSingle="true" execute="@this"/>
							</h:selectOneMenu>
					  		
							<h:outputText value="License Number: " />  
							<h:outputText id="license" value="#{patientInfoBean.docLicense}" />
						</h:panelGrid>
					</p:tab>
					<p:tab id="confirmation" title="Confirmation">
						<p:scrollPanel id="preview" style="width:580px; height:100px; padding:5px" mode="native">  
							<h:panelGrid id="dataPrev" columns="2">  
								<h:outputText value="Patient's Case Number: " />  
								<h:outputText value="#{patientInfoBean.patient.caseNumStr}" />
								<h:outputText value="Patient's Complaint: " />  
								<h:outputText value="#{patientInfoBean.patient.complaint}" />
								<h:outputText value="Doctor's Name: " />  
								<h:outputText value="#{patientInfoBean.docName}" />
								<h:outputText value="Doctor's License Number: " />  
								<h:outputText value="#{patientInfoBean.docLicense}" />
							</h:panelGrid>
						</p:scrollPanel>
						
						
						<a href="Pdf" target="_blank" onclick="confirmSaveDialog.show()"  style="font-size:12px;float:right;">Save and Export Data</a>	
						
						<a href="Pdf" target="_blank" onclick="ppiDialog.hide()"  style="font-size:12px; margin-left : 2em; margin-right: 2em; float:right;">Export Data</a>	
											  
						
						
						<p:commandLink id="saveOnly"  immediate="true" value="Save Data" style="font-size:12px; float:right;" 
										 onclick="confirmSaveDialog.show()" />
			
					</p:tab>
				
				
				
				</p:wizard>				
				<p:commandButton id="cancelPpi" value="Cancel" style="font-size:12px" update="@parent, :form:pidDialog :form:acc:pid :form:learnRecords" oncomplete="displayPpi.loadStep (displayPpi.cfg.steps [0], true)" icon="ui-icon-closethick" 
													  onclick="ppiDialog.hide()" />					  
			</p:dialog>
			
			<!--  Risk Factor Information Dialog Box (SPTBean) -->
			<p:hotkey bind="esc" handler="infoDialogP.hide()"></p:hotkey>
			<p:dialog header="Patient Information" widgetVar="infoDialogP" resizable="false" id="infoDialogP"  
					showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="left">    
				<h:panelGrid id="displayInfoP" columns="2" style="margin:0 auto; ">             
					
					<h:outputText value="Name: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.name}" style="font-size:14px;"/>
		  
					<h:outputText value="Description: " style="font-weight:bold; font-size:12px;"/>  
					<h:outputText value="#{sPTBean.selectedRf.description}" style="font-size:14px;"/> 
					
					
				</h:panelGrid>  
			</p:dialog>  
		
			<!--  Patient Information Dialog Box (PatientInfoBean) -->
			<p:hotkey bind="esc" handler="patientDialog.hide()"></p:hotkey>
			<p:dialog header="Patient Information" widgetVar="patientDialog" resizable="false" id="patientDialog"  
					showEffect="fade" hideEffect="fade" modal="true" style="width:40% !important;" position="center">    
				<h:panelGrid id="displayPatient" columns="1" style="margin:0 auto; ">  
					<p:dataTable id="personalD" var="personalD" widgetVar="personalD" rows="4"  style="width: 100%;" value="#{patientInfoBean.selectedP}" >
						<p:column style="width: 20%" headerText="Patient">
							<center>			
								<h:panelGrid id="displayPatientInfo" columns="2"  columnClasses="panelColumn,panelColumn"   >     
									<p:column>
										<h:outputText value="Case Number: " style="font-weight:bold; font-size:12px;"/>  
										<h:outputText value="#{patientInfoBean.selectedP.caseNumStr}" style="font-size:14px;"/>
									</p:column>
									<p:column> 
										<h:outputText value="Complaint: " style="font-weight:bold; font-size:12px;"/>  
										<h:outputText value="#{patientInfoBean.selectedP.complaint}" style="font-size:14px;"/> 
									</p:column>   
								</h:panelGrid> 	
							</center>	
						</p:column>		
					</p:dataTable>
						
					<p:dataTable id="rosScoreD" var="rosScoreD" widgetVar="rosScoreD" rows="2"  style="width: 100%;" value="#{patientInfoBean.selectedP}" >
						<p:column style="width: 20%" headerText="Rosier">
							<center>		
								<h:panelGrid id="displayPatientInfo" columns="2"  columnClasses="panelColumn,panelColumn"  >     
									<p:column>        
										<h:outputText value="Diagnosis: " style="font-weight:bold; font-size:12px;"/>  
										<h:outputText value="#{rosScoreD.rosDiagnosis}" style="font-size:14px;"/>
									</p:column>
						 
									<p:column style="width: 10px !important" >   
										<h:outputText value="Score: " style="font-weight:bold; font-size:12px;"/>  				            
										<h:outputText value="#{rosScoreD.rosScore}" style="font-size:14px;"/> 
									</p:column>   
								</h:panelGrid> 	
							</center>	
						</p:column>				
					</p:dataTable>
					

					<p:dataTable id="resultD" var="resultD" widgetVar="resultD" rows="4"  style="width: 100%;" value="#{patientInfoBean.selectedP}" >
						<p:column style="width: 20%" headerText="SPT Result">
							<center>	
								<h:panelGrid id="resultSPT" columns="2" columnClasses="panelColumn,panelColumn" style="margin:0 auto;" > 
									<p:row style="width: 50%">
										<p:column style="width: 50%">	           
											<h:outputText value="Stroke Name" style="font-weight:bold; font-size:16px;"/>
										</p:column> 
									</p:row>
									<p:row>			 
										<p:column style="width: 50%"> 
											<h:outputText value="Probability " style="font-weight:bold; font-size:16px;"/>   
										</p:column> 
									</p:row>
									<p:row>	 
										<p:column style="width: 50%">  
											<h:outputText value="Hemorrhagic Stroke" style=" font-size:12px;"/>  
										</p:column> 
									</p:row>
									<p:row>	 
										<p:column style="width: 20% !important"> 
											<h:outputText value="#{patientInfoBean.selectedP.probHemorrhagic}" style="font-size:14px;">
												<f:convertNumber minFractionDigits="2" maxFractionDigits="2" type="percent" />
											</h:outputText>
										</p:column> 
									</p:row>
									<p:row>		 	
										<p:column>
											<h:outputText value="Ischemic Stroke" style=" font-size:12px;"/>
										</p:column> 
									</p:row>
									<p:row>	 
										<p:column> 
											<h:outputText value="#{patientInfoBean.selectedP.probIschemic}" style="font-size:14px;">
												<f:convertNumber minFractionDigits="2" maxFractionDigits="2" type="percent" />
											</h:outputText>
										</p:column> 
									</p:row>
									<p:row>	 
										<p:column>
											<h:outputText value="None " style="font-size:12px;"/> 
										</p:column>
									</p:row>
									<p:row>	  
										<p:column>
											<h:outputText value="#{patientInfoBean.selectedP.probNone}" style="font-size:14px;">
												<f:convertNumber minFractionDigits="2" maxFractionDigits="2" type="percent" />
											</h:outputText>
										</p:column> 
									</p:row>	  
								</h:panelGrid> 
							</center>	
						</p:column>		
					</p:dataTable>
				</h:panelGrid>  
			</p:dialog>  	
			
			
				
			<!--  Load Patient Dialog Box (PatientInfoBean) -->
			<p:hotkey bind="esc" handler="loadPatientDialog.hide()"></p:hotkey>
			<p:dialog header="Load Patient Data" widgetVar="loadPatientDialog" resizable="false" id="loadPatientDialog"  
					showEffect="fade" hideEffect="fade" modal="true" style="width: 40% !important; " position="center">    
				<h:panelGrid id="loadPatient" columns="1" style="margin:0 auto; ">             
					<p:dataTable id="pidDialog" var="pidDialog" widgetVar="pidDialog" rows="5" paginator="true" rendered="true" 
								style="width: 100%;margin-top: 5px;" emptyMessage="No patient found with given search criteria."
								value="#{patientInfoBean.patientDataModel}" filteredValue="#{patientInfoBean.filteredP}">	
						<p:column style="width: 25%" id="listPDialog" headerText="Patient Code"
								sortBy="#{pidDialog.caseNumStr}"
								filterBy="#{pidDialog.caseNumStr}" 
								filterStyle="width:200px;"
								filterMaxLength="20"
								filterMatchMode="contains"
								styleClass="patientDCol">  
		        			<center>
				          		<h:outputText value="#{pidDialog.caseNumStr}" /> 
				          	</center> 
				       	</p:column>  
						<p:column style="width: 25%" headerText="Load">
							<center>
				        		<p:commandButton id="infoP" icon="ui-icon-arrowthickstop-1-s" update=":form:confirmLoadDialog :form:displayPpi" oncomplete="confirmLoadDialog.show()">
					          		<f:setPropertyActionListener value="#{pidDialog}" target="#{patientInfoBean.selectedP}" />	
					          	</p:commandButton>
							</center>	
						</p:column>
					</p:dataTable>
				</h:panelGrid>  
			</p:dialog>  
    
  			<p:confirmDialog header="Confirm Save" widgetVar="confirmSaveDialog" closable="false" closeOnEscape="false" resizable="false" id="confirmSaveDialog"  
							showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center"
							message="Are you sure you want to save the data?">    
                
				<center>	
				<p:commandButton id="yesSavePatient" value="Yes" 
							update="@parent, :form:pidDialog :form:acc:pid :form:learnRecords" style="font-size:12px" oncomplete="displayPpi.loadStep (displayPpi.cfg.steps [0], true)"
							onclick="ppiDialog.hide(),confirmSaveDialog.hide()" action="#{patientInfoBean.saveDataDecider}" /> 
						
				<p:commandButton id="noSavePatient" value="No" style="font-size:12px" 
							onclick="confirmSaveDialog.hide()" type="button" />
				</center>			
			</p:confirmDialog>
			
			
  
			<p:confirmDialog header="Confirm Load" widgetVar="confirmLoadDialog" closable="false" closeOnEscape="false" resizable="false" id="confirmLoadDialog"  
							showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center"
							message="Are you sure you want to load patient with case number: #{patientInfoBean.selectedP.caseNumStr}?">    
                
			<center>
				<p:commandButton id="yesLoadPatient" value="Yes" 
							update=":form:acc:riskFactors :form:acc:output :form:acc:bigTable :form:acc:rosScore" style="font-size:12px"
							onclick="loading.show()"
							actionListener="#{patientInfoBean.loadSpecificPatient}"/> 
						
				<p:commandButton id="noLoadPatient" value="No" style="font-size:12px" update=":form:loadPatient"
							onclick="confirmLoadDialog.hide()" type="button" />
			</center>			
			</p:confirmDialog>
			
   	
			<!-- Confirm Save As New Patient Dialog Box (PatientInfoBean) -->
			<p:confirmDialog header="Save Patient Information" widgetVar="savePatientDialog" closable="false" closeOnEscape="false"  resizable="false" id="savePatientDialog"  
						showEffect="fade" hideEffect="fade" modal="true" styleClass="autoSize" position="center"
						message="Save as new patient?">    
						
				<center>
					<p:commandButton id="yessNewPatient" value="Yes" 
							style="font-size:12px" update=":form:ppiDialog :form:savePatientDialog" actionListener="#{patientInfoBean.saveNewPatient}"/> 
							
					<p:commandButton id="notNewPatient" value="No" style="font-size:12px" update=":form:ppiDialog :form:savePatientDialog"
							actionListener="#{patientInfoBean.loadOldPatient}"  />
							
					<p:commandButton id="cancelNewPatient" value="Cancel" style="font-size:12px" 
							onclick="savePatientDialog.hide()" type="button" />
				</center>			
			</p:confirmDialog>
  
    		<!--Admin Tools Dialog Boxes -->
    		
    		<!-- Add User Dialog Box -->
    		<p:hotkey bind="esc" handler="addUserDialog.hide()"></p:hotkey>
    		<p:dialog header="Add New User" widgetVar="addUserDialog" id="addUserDialog" showEffect="fade" 
    		hideEffect="fade" modal="true">
    			<center>
    			<h:form>
	    			<p:inputText id="newUsername" value="#{adminBean.user.username}" styleClass="addUserInput" validatorMessage="Username is Required">
	    				
	    			</p:inputText><br/><br/>
	    			<p:watermark for="newUsername" value="Username"></p:watermark>
	    			<p:message for="newUsername" style="color:red" />
	    			
	    			<p:password id="newPassword" value="#{adminBean.user.password}" styleClass="addUserInput">
	    				 
	    			</p:password><br/><br/>
	    			<p:watermark for="newPassword" value="Password"></p:watermark>
	    			<p:message for="newPassword" style="color:red" />
	    			
	    			<p:inputText id="newName" value="#{adminBean.user.name}" styleClass="addUserInput">
	    				
	    			</p:inputText><br/><br/>
	    			<p:watermark for="newName" value="Name"></p:watermark>
	    			<p:message for="newName" style="color:red" />
	    			
	    			<p:inputText id="newLicense" value="#{adminBean.user.license}" styleClass="addUserInput">
	    				
	    			</p:inputText><br/><br/>
	    			<p:watermark for="newLicense" value="License" />
	    			<p:message for="newLicense" style="color:red" />
	    			
	    			<p:selectOneMenu id="newType" value="#{adminBean.user.type}">
	    				<f:selectItem itemLabel="Select Type" itemValue="" />
	    				<f:selectItem itemLabel="Administrator" itemValue="ADMIN" />
	    				<f:selectItem itemLabel="User" itemValue="USER" />
	    			</p:selectOneMenu>
	    			
	    			<br />
	    			<p:selectOneMenu id="userType" value="#{adminBean.user.user_type}">
	    				<f:selectItem itemLabel="Select User Type" itemValue="" />
	    				<f:selectItem itemLabel="General Practitioner" itemValue="GP" />
	    				<f:selectItem itemLabel="Expert" itemValue="EX" />
	    				<f:selectItem itemLabel="Not a Doctor" itemValue="NA" />
	    			</p:selectOneMenu>
	    			<br/>
    			
    			<p:commandButton icon="ui-icon-disk" value="Create New User"
    							actionListener="#{adminBean.addUser}" 
    							oncomplete="addUserDialog.hide()"
    							update=":form:growl"/>
    			</h:form>			
    			</center>
    			
    		</p:dialog>
    		
    		
    		<!-- Edit User Dialog Box -->
    		<p:hotkey bind="esc" handler="editUserDialog.hide()"></p:hotkey>
    		<p:dialog header="Edit Users" widgetVar="editUserDialog" id="editUserDialog" showEffect="fade" 
    		hideEffect="fade" modal="true">
    			<center>
					<p:dataTable id="listUser" var="listUser" rows="5" rendered="true" widgetVar="listUser"
							   value="#{adminBean.userListDataModel}" filteredValue="#{adminBean.filteredUsers}"
							   paginator="true" style="width: 100%; margin-top: 10px;"
							   emptyMessage="No matching user for this Admin.">  
							   
						<p:column id="listUserName" headerText="User Accounts"
											sortBy="#{listUser.username}"
											filterBy="#{listUser.username}" 
											filterStyle="width: 80%;"
											filterMaxLength="32"
											filterMatchMode="contains"
											>    
							<h:outputText value="#{listUser.username}" />  
						</p:column>  
						
						<p:column headerText="Operations" style="width: 20%;">  
							<center>
								<p:commandButton id="editUser" icon="ui-icon-pencil" update=":form:editUserInfoDialog" oncomplete="editUserInfoDialog.show()">
									<f:setPropertyActionListener value="#{listUser}" target="#{adminBean.selectedUser}" />
								</p:commandButton>
								<p:commandButton id="deleteUser" icon="ui-icon-trash" update=":form:deleteUserDialog" action="#{adminBean.populateDeleteUser}" oncomplete="deleteUserDialog.show()">
									<f:setPropertyActionListener value="#{listUser}" target="#{adminBean.selectedUser}" />
								</p:commandButton>
							</center>
						</p:column>
			 		</p:dataTable>
			 		
			 		<p:commandButton value="DONE" onclick="editUserDialog.hide()" />
			 	</center>
    		</p:dialog>
    		    		
    		<!-- Edit User Information Dialog Box -->
    		<p:hotkey bind="esc" handler="editUserInfoDialog.hide()"></p:hotkey>
    		<p:dialog header="Edit User Information" widgetVar="editUserInfoDialog" id="editUserInfoDialog" showEffect="fade" 
    		hideEffect="fade" modal="true">
    			<h:outputText value="Username" />
    			<p:inputText value="#{adminBean.selectedUser.username}" ></p:inputText><br/><br/>
    			<h:outputText value="New Password"></h:outputText>
    			<p:password value="#{adminBean.newPass}" ></p:password><br/><br/>
    			<h:outputText value="Name"></h:outputText>
    			<p:inputText value="#{adminBean.selectedUser.name}"></p:inputText><br/><br/><br/>
    			<h:outputText value="License"></h:outputText>
    			<p:inputText value="#{adminBean.selectedUser.license}"></p:inputText><br/><br/><br/>
    			<p:selectOneMenu value="#{adminBean.selectedUser.type}">
	    				<f:selectItem itemLabel="Select Type" itemValue="" />
	    				<f:selectItem itemLabel="Administrator" itemValue="ADMIN" />
	    				<f:selectItem itemLabel="User" itemValue="USER" />
	    			</p:selectOneMenu>
	    			
	    			<br />
	    			<p:selectOneMenu value="#{adminBean.selectedUser.user_type}">
	    				<f:selectItem itemLabel="Select User Type" itemValue="" />
	    				<f:selectItem itemLabel="General Practitioner" itemValue="GP" />
	    				<f:selectItem itemLabel="Expert" itemValue="EX" />
	    				<f:selectItem itemLabel="Not a Doctor" itemValue="NA" />
	    			</p:selectOneMenu>
	    			<br/>
    			
    			<p:commandButton id="saveEditUser" value="Save" actionListener="#{adminBean.editUser}"
									update=":form:listUser :form:growl"/>
    			<p:commandButton id="dontEditUser" value="Cancel" onclick="editUserInfoDialog.hide()" />
    			
    		</p:dialog>
    		
    		<p:hotkey bind="esc" handler="deleteUserDialog.hide()"></p:hotkey>
    		<p:confirmDialog header="Confirm Delete User" widgetVar="deleteUserDialog" resizable="false" id="deleteUserDialog"  
						showEffect="fade" hideEffect="fade" modal="true" position="center"
						message="Are you sure you want to delete #{adminBean.selectedUser.username} ?">    
				<center>
					<p:password id="passDel" value="#{adminBean.confirmPass}" />
					<p:watermark for="passDel" value="Password"  />
					<br />
					<p:commandButton id="deleteUserNow" value="Yes" actionListener="#{adminBean.deleteUser}" update=":form:growl :form:listUser"/> 
					<p:commandButton id="dontDeleteUser" value="No" style="font-size:12px" onclick="deleteUserDialog.hide()" type="button" />	
				</center>			
			</p:confirmDialog>
			
			<p:hotkey bind="esc" handler="learnNetworkDialog.hide()"></p:hotkey>
			<p:dialog header="Learn Network" widgetVar="learnNetworkDialog" id="learnNetworkDialog" showEffect="fade" 
    		hideEffect="fade" modal="true" resizable="false" style="width: 20% !important;">
    			<center>
						<p:dataTable id="learnRecords" var="learnRecords" rows="5" widgetVar="learnRecords" 
									paginator="true" style="width: 100%; margin-top: 10px;"					
									emptyMessage="No patient records found with given search criteria."
								    value="#{learnNetBean.pDataModel}" selection="#{learnNetBean.selectedPs}"
									filteredValue="#{learnNetBean.filteredP}">
						
							  
							<p:column selectionMode="multiple" style="width: 2%" />	
					
							<p:column id="learnRecEntry" headerText="Patient Record" style="width: 20%"
											sortBy="#{learnRecords.caseNum}"
											filterBy="#{learnRecords.caseNum}" 
											filterStyle="width:150px;"
											filterMaxLength="20"
											filterMatchMode="containss"
											styleClass="patientDColL"> 
								<center> 
								<h:outputText value="#{learnRecords.caseNum}" />   
								</center> 
							</p:column>  
							
						</p:dataTable>
						<p:commandButton id="learnCancel" value="Cancel" type="button" style="float:right;" onclick="learnNetworkDialog.hide();"/>
						<p:commandButton id="learnButton" value="Learn" type="button" style="float:right;" onclick="confirmLearn.show();" actionListener="#{learnNetBean.learn}"/>
						
    			</center>
    		</p:dialog>
    		
    		<p:hotkey bind="esc" handler="confirmLearn.hide()"></p:hotkey>
    		<p:confirmDialog message="Proceed learning checked records?" closable="false" closeOnEscape="false" widgetVar="confirmLearn" id="confirmLearn" showEffect="fade"
    		hideEffect="fade" modal="true" resizable="false">
    			<p:commandButton id="learnLater" value="No" style="font-size: 13px; float: right;" oncomplete="confirmLearn.hide()"></p:commandButton>
    			<p:commandButton id="learnNow" value="Yes" style="font-size: 13px; float: right;" onclick="loading.show()" actionListener="#{learnNetBean.learn}" update="@all"></p:commandButton>
    			
    		</p:confirmDialog>
		
		
		<!-- Actual contents of the Application that is rendered only upon log in of the user -->
			<p:tabView id="acc" styleClass="accordion" rendered="#{accountMgtBean.loggedIn}">
				
				<!-- Stroke Prediction using Scoring system (RosierBean) -->
				<p:tab title="ROSIER" titleStyleClass="rosierHeader" id="ros" >
					
					<!-- <p>The Recognition of Stroke in the Emergency Room</p> -->
					
					<p:commandButton id="openRosier" value="Load Patient Data" icon="ui-icon-folder-open" oncomplete="loadPatientDialog.show()" style="margin-top: 5px; margin-bottom: 5px; font-size: 13px !important; float:right;" 
								update="riskFactors :form:acc:output :form:acc:bigTable :form:acc:rosScore :form:displayPpi" />
													
					<center>	
						<p:dataTable id="bigTable" var="bigTable" widgetVar="bigTable" rows="2" hederText="" value="#{rosierBean.result}">
							<p:column style="width: 100%">
							
								<p:dataTable id="rques1" var="rques1" widgetVar="rques1" rows="3" value="#{rosierBean.rq1}">										
									<p:column style="width: 90%" headerText="Questions">
										<h:outputText value="&emsp;#{rques1.question}"/>
									</p:column>
									
									<p:column headerText="YES(score-1)" style="width: 10%"> 
										<center>	      			
											<p:selectBooleanCheckbox value="#{rques1.value}">  							
												<p:ajax event="change" update="rques1 :form:acc:rosScore" listener="#{rosierBean.decrement}"/>  
											</p:selectBooleanCheckbox> 
										</center>	
									</p:column>
												
								</p:dataTable>
								
								<p:dataTable id="rques2" var="rques2" widgetVar="rques2" rows="6" value="#{rosierBean.rq2}">
														
									<p:column style="width: 90%" headerText="Is there a New Acute onset (or on awakening from sleep)?">
										<h:outputText value="&emsp;#{rques2.question}"/>
									</p:column>
									
									<p:column headerText="YES(score+1)" style="width: 10%">
										<center>	
											<p:selectBooleanCheckbox  value="#{rques2.value}">  
												<p:ajax event="change" update="rques2 :form:acc:rosScore" listener="#{rosierBean.increment}"/>  
											</p:selectBooleanCheckbox> 
										</center>	
									</p:column>
									
								</p:dataTable>
							</p:column>
						</p:dataTable>
						<p:dataTable id="rosScore" var="rosScore" widgetVar="rosScore" rows="2" value="#{rosierBean.result}">
												
							<p:column style="width: 20%" headerText="Provisional Diagnosis">
								<center>	
									<h:outputText id="rdiagnosis" value="#{rosScore.diagnosis}"/>
								</center>	
							</p:column>
							<p:column style="width: 67%" headerText="Description">
								<h:outputText value="#{rosScore.description}"/>
							</p:column>
							<p:column style="width:13%" headerText="Total Score">
								<center>	
									<h:outputText id="rscore" value="#{rosScore.score}"/>
								</center>	
							</p:column>
							
						</p:dataTable>
					</center>
					
					<p:commandButton id="newPatientRosier" value="New Patient" icon="ui-icon-person"
									style="margin-top: 5px; margin-bottom: 5px; font-size: 13px !important; float:right;"
									update="@all" actionListener="#{patientInfoBean.newPatient}" onclick="loading.show()" />	
							
					
					<p:commandButton id="processInfoRosier" value="Process Patient Information" icon="ui-icon-person"
									style="margin-top: 5px; margin-bottom: 5px; font-size: 13px !important; float:right;"
									actionListener="#{patientInfoBean.processPatientInfo}"/>
					
					
		
				</p:tab>
				
				<!-- Stroke Prediction using Bayesian network (SPTBean) -->
				<p:tab title="Prediction Tool" titleStyleClass="sptHeader" id="spt">
				
					<p:commandButton id="openSpt" value="Load Patient Data" icon="ui-icon-folder-open" oncomplete="loadPatientDialog.show()" style="margin-top: 5px; margin-bottom: 5px; font-size: 13px !important; float:right;" 
									update="riskFactors :form:acc:output :form:acc:bigTable :form:acc:rosScore :form:displayPpi" />
						
					<!-- Risk Factors -->
					<center>
						<p:dataTable id="riskFactors" var="riskFactors" rows="5" widgetVar="riskFactors" 
									paginator="true" style="width: 100%; margin-top: 10px;"
									value="#{sPTBean.rfDataModel}" selection="#{sPTBean.selectedRfs}"
									filteredValue="#{sPTBean.filteredRfs}"
									emptyMessage="No risk factors found with given search criteria."
									>  
						
							<p:ajax event="rowSelectCheckbox" listener="#{sPTBean.selectListener}" update="riskFactors :form:acc:output"/>
							<p:ajax event="rowUnselectCheckbox" listener="#{sPTBean.unselectListener}" update="riskFactors :form:acc:output"/>
							  
							<p:column selectionMode="multiple" style="width: 2%" styleClass="hideSelectAll" />
									
							<p:column id="rfName" headerText="Risk Factor" style="width: 20%"
											sortBy="#{riskFactors.name}"
											filterBy="#{riskFactors.name}" 
											filterStyle="width:200px;"
											filterMaxLength="32"
											filterMatchMode="contains"
											styleClass="riskCol">  
								<h:outputText value="#{riskFactors.name}" />  
							</p:column>  
		  
							<p:column headerText="Value (if applicable)" style="width: 12%;">  
								<p:selectOneMenu value="#{riskFactors.selectedRange}" effect="fold"
																rendered="${not empty riskFactors.rangeValues}"
																label="#{riskFactors.name}"
																disabled="#{riskFactors.display}">  
									<p:ajax listener="#{sPTBean.selectListener}" update="riskFactors :form:acc:output" />
									<f:selectItems value="#{riskFactors.rangeValues}" var="ranges"/>
								</p:selectOneMenu>  
							</p:column>  
		  
							<p:column headerText="Probability Bar" style="width: 12%;">  
								<p:progressBar id="status1" value="#{riskFactors.probability}" widgetVar="status1" />  
							</p:column>  
					
							<p:column headerText="Info" style="width: 4%;">
								<center>
									<p:commandButton id="info" icon="ui-icon-info" update=":form:displayInfo" oncomplete="infoDialog.show()">
										<f:setPropertyActionListener value="#{riskFactors}" target="#{sPTBean.selectedRf}" />
									</p:commandButton>
								</center>
							</p:column>
				
						</p:dataTable>
				
						<p:dataTable id="output" var="output" widgetVar="output" rows="3" value="#{sPTBean.st}" 
							style="width: 100%; margin-top: 10px; margin-bottom: 10px">  
		  
							<p:column headerText="Stroke Type" style="width: 20%;">
								<h:outputText value="#{output.name}"/>
							</p:column>
							
							<p:column headerText="Description" style="width: 70%; font-size: 13px;">
								<h:outputText value="#{output.description}"/>
							</p:column>
							
							<p:column headerText="Probability" style="width: 10%;">
								<center>
									<h:outputText value="#{output.probability}">
										<f:convertNumber minFractionDigits="2" maxFractionDigits="2" type="percent" />
									</h:outputText>
								</center>
							</p:column>
						</p:dataTable> 
					</center>
				
					<p:commandButton id="newPatientSPT" value="New Patient" icon="ui-icon-person"
									style="margin-top: 5px; margin-bottom: 5px; font-size: 13px !important; float:right;"
									update="@all" actionListener="#{patientInfoBean.newPatient}"  />	
							
					
					<p:commandButton id="processInfoSPT" value="Process Patient Information" icon="ui-icon-person"
									style="margin-top: 5px; margin-bottom: 5px; font-size: 13px !important; float:right;"
									actionListener="#{patientInfoBean.processPatientInfo}"/>
				</p:tab>
				
				<!-- Management of the network and database contents (SKDBean) -->
				<p:tab title="Network Tool" titleStyleClass="skdHeader" id="skd" rendered="#{accountMgtBean.expert}">
						
					<center>
						<p:dataTable id="listRisk" var="listRisk" rows="5" rendered="true" widgetVar="listRisk"
								   paginator="true" style="width: 100%; margin-top: 10px;"
								   value="#{sKDBean.rfDataModel}" filteredValue="#{sKDBean.filteredRfs}"
								   emptyMessage="No risk factors found with given search criteria.">  
								   
							<p:column id="listRfName" headerText="Risk Factor"
												sortBy="#{listRisk.name}"
												filterBy="#{listRisk.name}" 
												filterStyle="width:200px;"
												filterMaxLength="32"
												filterMatchMode="contains"
												styleClass="riskCol">  
								<h:outputText value="#{listRisk.name}" rendered="#{listRisk.toEdit}" style="color: red"/>  
								<h:outputText value="#{listRisk.name}" rendered="#{!listRisk.toEdit}" />  
							</p:column>  
							
							<p:column headerText="Operations" style="width: 10%;">  
								<center>
									<p:commandButton id="edit" icon="ui-icon-pencil" update=":form:displayEdit" action="#{sKDBean.populateEdit}" oncomplete="editDialog.show()">
										<f:setPropertyActionListener value="#{listRisk}" target="#{sKDBean.selectedRf}" />
									</p:commandButton>
									<p:commandButton id="delete" icon="ui-icon-trash" update=":form:deleteDialog" action="#{sKDBean.populateDelete}" oncomplete="deleteDialog.show()">
										<f:setPropertyActionListener value="#{listRisk}" target="#{sKDBean.selectedRf}" />
									</p:commandButton>
								</center>
							</p:column>
				 
							<p:column headerText="Created On" style="width: 10%; font-size: 13px;">  
								<center><h:outputText value="#{listRisk.created_date}" /></center>  
							</p:column>  
				 
							<p:column headerText="Last Update" style="width: 10%; font-size: 13px;">  
								<center><h:outputText value="#{listRisk.last_update_date}" /></center>  
							</p:column>
						
						</p:dataTable>
					</center>
				
					<p:commandButton id="editStroke" value="Edit Stroke Information" icon="ui-icon-clipboard" style="margin-top: 10px; margin-bottom: 10px; font-size: 13px !important; float:left;"
									 action="#{sKDBean.populateStrokeEdit}"
									 update=":form:editStrokeInfo" oncomplete="editStrokeInfoDialog.show()" />
					
					<p:commandButton id="add" value="Add New Risk Factor" icon="ui-icon-plusthick" style="margin-top: 10px; margin-bottom: 10px; font-size: 13px !important; float:right;"
													update=":form:displayAdd" oncomplete="addDialog.show()" />
									
					
					
					<p:commandButton id="learn" value="Learn Network" update=":form:learnNetworkDialog" icon="ui-icon-lightbulb" style="margin-top: 10px; margin-bottom: 10px; font-size: 13px !important; float:right;" oncomplete="learnNetworkDialog.show()" actionListener="#{learnNetBean.retrievePatients}" />
			
					
									
					
				</p:tab>
				
				<!-- Manage Patient Information (PatientInfoBean) -->
				<p:tab title="Patient Database" titleStyleClass="pidHeader" id="pidH">
					<center>
						<p:dataTable id="pid" var="pid" widgetVar="pid" rows="5" paginator="true" rendered="true" 
								style="width: 30%;margin-top: 10px;" emptyMessage="No patient found with given search criteria."
								 value="#{patientInfoBean.patientDataModel}" filteredValue="#{patientInfoBean.filteredP}">											
							<p:column style="width: 60%" id="listP" headerText="Patient Code"
									sortBy="#{pid.caseNumStr}"
									filterBy="#{pid.caseNumStr}" 
									filterStyle="width:200px;"
									filterMaxLength="20"
									filterMatchMode="contains"
									styleClass="patientCol">  
								<center>	
								<h:outputText value="#{pid.caseNumStr}" />  
								</center>
							</p:column>  

							<p:column style="width: 40%" headerText="Info">
							
								<center>
								<p:commandButton id="infoP" icon="ui-icon-info" update=":form:displayPatient" oncomplete="patientDialog.show()">
									<f:setPropertyActionListener value="#{pid}" target="#{patientInfoBean.selectedP}" />	
								</p:commandButton>
								</center>	
							</p:column>
						</p:dataTable>
					</center>
				</p:tab>
			</p:tabView>
	</div>
	
	
	
	
	<!-- Bottom Part of the Web Application -->
	<div id="footer">
			<div id="links"><center>
				<h:link styleClass="linktext" outcome="help">HELP</h:link>	|
				<h:outputLink styleClass="linktext" value="http://aessd-cvmig.net46.net/about.php" >ABOUT</h:outputLink>	|
				<h:outputLink styleClass="linktext"  value="http://aessd-cvmig.net46.net/contact.php" >CONTACT US</h:outputLink>		
				<p style="font-family:'Helvetica';">University of the Philippines, Diliman<br />Copyright &copy; 2012</p>
			</center></div>
		</div>

</h:form>
</h:body>

</html>